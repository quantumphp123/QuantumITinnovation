var quform=function(e,o,s){"use strict";var t,r=e.core,i=r.cache,a=!1,n=null,f=[];return o((t={init:function(){i.get("#qfb-save-entry").add(i.get("#qfb-fixed-save-button")).click(function(){t.saveEntry()}),i.get("#qfb-entry-form").on("click",".qfb-edit-file-upload-remove",function(){var e=o(this).closest(".qfb-edit-file-upload"),s=e.data("quform-upload-uid");s&&f.push(s),e.qfbSlideHide()}),o(document).on("click",function(e){if(e&&e.target&&e.ctrlKey){var s=o(e.target);s.is(".quform-field-radio:checked")&&s.prop("checked",!1)}})},saveEntry:function(){a||(a=!0,"number"==typeof n&&(clearTimeout(n),n=null),i.get("#qfb-fixed-save-button").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),i.get("#qfb-entry-form").ajaxSubmit({type:"POST",dataType:"json",data:{quform_removed_upload_uids:f.join(",")},iframe:!0,url:"",success:function(e){switch((e=r.sanitiseResponse(e)).type){case"success":t.responseSuccess(e);break;case"error":t.responseError(e);break;case"invalid":t.responseInvalid(e)}}}))},allowResubmission:function(){o(".qfb-has-validation-error").removeClass("qfb-has-validation-error"),o(".qfb-validation-error").remove(),a=!1},responseSuccess:function(e){t.allowResubmission(),f=[],r.showFixedMessage(e.message,"success"),i.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-saved"),n=setTimeout(function(){i.get("#qfb-fixed-save-button").removeClass("qfb-saved")},2e3)},responseError:function(e){var a=null;t.allowResubmission(),i.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),n=setTimeout(function(){i.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3),r.isNonEmptyString(e.message)&&r.showFixedMessage(e.message,"error"),o.each(e.errors,function(e,s){var r=o(".qfb-edit-element-"+e);r.length&&(t.addElementError(e,s),a||(a=r))}),o(".qfb-validation-error").qfbSlideShow(),a&&r.scrollTo(a)},addElementError:function(e,s){var r=o('<div class="qfb-validation-error qfb-cf">');return o('<div class="qfb-validation-error-inner">').appendTo(r).append(o('<span class="qfb-validation-error-text">').html(s)),o(".qfb-edit-element-"+e).addClass("qfb-has-validation-error"),o(".qfb-edit-input-"+e).after(r),r},responseInvalid:function(e){t.allowResubmission(),r.showFixedMessage(e.message,"error"),i.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),n=setTimeout(function(){i.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3)}}).init),e.entries=e.entries||{},e.entries.edit=t,e}(quform,jQuery,quformCoreL10n);