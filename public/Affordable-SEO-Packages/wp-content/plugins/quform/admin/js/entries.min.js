var quform=function(e,i,s,b){"use strict";var t,o=e.core,a=o.cache,n=i(document);function l(t){a.get("#qfb-entry-label-set").find(".qfb-entry-label").removeClass("qfb-label-selected").each(function(){var e=i(this);t.find(".qfb-entry-label-indicator").each(function(){i(this).data("id")==e.data("label").id&&e.addClass("qfb-label-selected")})}),a.get("#qfb-entry-label-set").show()}return i((t={init:function(){a.get(".qfb-entry-label-indicators").click(function(e){e.stopPropagation();var t=i(this),n=t.parent();a.get("#qfb-entry-label-set").parent()[0]===n[0]?a.get("#qfb-entry-label-set").is(":visible")?a.get("#qfb-entry-label-set").hide():l(t):(n.append(a.get("#qfb-entry-label-set").hide()),l(t))}),n.on("click",function(){a.get("#qfb-entry-label-set").hide()}),a.get("#qfb-entry-label-set").click(function(e){e.stopPropagation()}),a.get("#qfb-entry-label-set").find(".qfb-entry-label").click(function(){t.setEntryLabel(i(this))})},setEntryLabel:function(e){e.toggleClass("qfb-label-selected");var t=e.data("label"),n=e.hasClass("qfb-label-selected"),a=e.closest("th, td"),l=a.find(".qfb-entry-label-indicators");if(n){if(t.color){var r=i('<span class="qfb-entry-label-indicator">').data("id",t.id).css("background-color",t.color);o.isColorTransparent(t.color)&&r.addClass("qfb-entry-label-indicator-transparent"),o.isNonEmptyString(t.name)&&r.attr("title",t.name),l.append(r),l.find(".qfb-entry-label-indicator:not(.qfb-entry-label-indicator-transparent)").length&&l.find(".qfb-entry-no-labels").hide()}}else l.find(".qfb-entry-label-indicator").filter(function(){return i(this).data("id")==t.id}).remove(),l.find(".qfb-entry-label-indicator:not(.qfb-entry-label-indicator-transparent)").length||l.find(".qfb-entry-no-labels").show();i.ajax({url:b.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_set_entry_labels",_ajax_nonce:s.setEntryLabelsNonce,entry_id:a.data("entry-id"),entry_label_id:t.id,adding:n}})}}).init),e.entries=t,e}(quform,jQuery,quformEntriesL10n,quformCoreL10n);