var quformInsertForm=function(c){"use strict";var d,a,r=c(document);return d={activatedFancybox:!1,init:function(o){a=c(o).data("l10n"),d.loadPopup()},loadPopup:function(){c.ajax({url:a.ajaxUrl+"?action=quform_insert_form",dataType:"html"}).done(function(o){var e=c(o),t=function(){e.remove(),c("body").css("overflow",""),r.off("keydown.quform-close-popup")};e.on("change","#qfb-insert-form-id",d.updateShortcodePreview),e.on("click","#qfb-insert-form-popup, #qfb-insert-form-show-title, #qfb-insert-form-show-description",d.updateShortcodePreview),e.on("keyup blur","#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options",d.updateShortcodePreview),e.on("click","#qfb-insert-form-preview",function(){c(this).focus().select()}),e.on("click",".qfb-insert-form-go",function(){var o=d.generateShortcode();return o?window.send_to_editor?(window.send_to_editor(o),t()):alert(a.couldNotSendToEditor):alert(a.selectForm),!1}),e.on("click",".qfb-insert-form-cancel, .qfb-insert-form-overlay",t),e.on("click","#qfb-insert-form-popup",function(){c("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting")[c(this).is(":checked")?"slideDown":"slideUp"]()}),c("body").css("overflow","hidden"),e.appendTo(c("body")).show(),r.on("keydown.quform-close-popup",function(o){27==o.keyCode&&t()}),e.find(".qfb-popup-overlay").click(t),c("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting").hide()})},generateShortcode:function(){var o=c("#qfb-insert-form-id").val(),e="";if(o){var t=c("#qfb-insert-form-id option:selected").text(),r=c("#qfb-insert-form-popup").is(":checked"),n="";if(c("#qfb-insert-form-show-title").is(":checked")||(n+=' show_title="0"'),c("#qfb-insert-form-show-description").is(":checked")||(n+=' show_description="0"'),r){var i=c("#qfb-insert-form-content").val(),f=c("#qfb-insert-form-width").val(),s=c("#qfb-insert-form-options").val();f.length&&(n+=' width="'+f+'"'),s.length&&(n+=" options='"+s+"'"),e='[quform_popup id="'+o+'" name="'+t+'"'+n+"]"+i+"[/quform_popup]",d.activatedFancybox||(d.activatedFancybox=!0,c.ajax({url:a.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_set_popup_enabled"}}))}else e='[quform id="'+o+'" name="'+t+'"'+n+"]"}return e},updateShortcodePreview:function(){var o=d.generateShortcode(),e=c("#qfb-insert-form-preview");o?e.val(o).parent().show():e.val("").parent().hide()}}}(jQuery);